FROM google/cloud-sdk:latest

ENV GCLOUD_PULL_PASSWORD=gcloud_pull_password
ENV GCLOUD_PULL_USERNAME=gcloud_pull_username

COPY ci-scripts/gcloud_deploy.sh ./
COPY ci-scripts/gcloud_vm_deploy.sh ./
COPY .env.docker ./.env
COPY gcloud_auth.json ./
COPY docker-compose-prod.yml ./
RUN chmod +x gcloud_deploy.sh
CMD ["sh", "-c","./gcloud_deploy.sh"]
